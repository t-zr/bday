<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday Card</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle, #fff0f5, #ffe4e1);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px;
      box-sizing: border-box;
    }

```
#birthdayCard {
  position: relative;
  width: min(600px, 90vw);
  height: min(400px, 80vh);
  perspective: 1500px;
  max-width: 100%;
}

.card {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 1.2s cubic-bezier(0.4, 0.0, 0.2, 1);
  cursor: pointer;
}

.card.flipped {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 30px 20px;
  box-sizing: border-box;
  box-shadow: 
    0 20px 40px rgba(0,0,0,0.3),
    inset 0 2px 0 rgba(255,255,255,0.3),
    0 0 30px rgba(255, 105, 180, 0.4);
  border: 3px solid rgba(255,255,255,0.3);
  position: relative;
  overflow: hidden;
}

/* Front of card */
.card-front {
  background: linear-gradient(135deg, #ff69b4 0%, #ff1493 25%, #ffd700 50%, #ff6347 75%, #ff69b4 100%);
  background-size: 400% 400%;
  animation: gradient-shift 8s ease infinite;
  color: white;
}

.card-front:hover {
  box-shadow: 
    0 25px 50px rgba(0,0,0,0.4),
    inset 0 2px 0 rgba(255,255,255,0.3),
    0 0 40px rgba(255, 105, 180, 0.6);
  transform: translateY(-2px);
}

.card-front::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.15), transparent);
  animation: cover-shine 4s linear infinite;
  pointer-events: none;
}

/* Back of card */
.card-back {
  background: linear-gradient(135deg, #fff8fb, #fff, #fef7ff);
  color: #333;
  transform: rotateY(180deg);
}

.card-back::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 20% 20%, rgba(255, 105, 180, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 60%, rgba(64, 224, 208, 0.1) 0%, transparent 50%);
  animation: page-sparkle 8s ease-in-out infinite;
  pointer-events: none;
}

.cover-content {
  text-align: center;
  position: relative;
  z-index: 2;
  max-width: 100%;
}

.cover-decoration {
  font-size: clamp(3em, 8vw, 4.5em);
  margin-bottom: 0.3em;
  animation: cake-bounce 3s ease-in-out infinite;
  filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.4));
}

.cover-title {
  font-size: clamp(1.8em, 5vw, 2.8em);
  font-weight: 900;
  margin: 0.2em 0;
  text-shadow: 
    3px 3px 6px rgba(0,0,0,0.4),
    0 0 25px rgba(255, 255, 255, 0.6);
  animation: title-glow 3s ease-in-out infinite;
  letter-spacing: 1px;
}

.cover-subtitle {
  font-size: clamp(0.9em, 2.5vw, 1.2em);
  margin: 0.5em 0;
  opacity: 0.95;
  font-weight: 400;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
  font-style: italic;
  animation: subtitle-fade 4s ease-in-out infinite;
}

.cover-balloons {
  font-size: clamp(1.5em, 4vw, 2.2em);
  margin: 0.5em 0;
  animation: balloons-float 4s ease-in-out infinite;
  filter: drop-shadow(0 3px 8px rgba(255, 20, 147, 0.3));
}

.cover-hint {
  font-size: clamp(0.75em, 2vw, 0.9em);
  margin-top: 1em;
  opacity: 0.8;
  animation: hint-pulse 2s ease-in-out infinite;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  font-weight: 300;
}

/* Back content styles */
.emoji-deco {
  font-size: clamp(1.2em, 4vw, 2em);
  margin-bottom: 0.8em;
  animation: party-bounce 2s infinite, emoji-spin 4s linear infinite;
  filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.4));
}

.card-message {
  font-size: clamp(0.9em, 2.5vw, 1.2em);
  font-weight: 700;
  background: linear-gradient(45deg, #ff1493, #ff69b4, #ffd700, #ff6347, #ff1493);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-align: center;
  line-height: 1.5;
  white-space: pre-line;
  animation: rainbow-text 3s ease-in-out infinite;
  max-width: 100%;
  /* Fallback for browsers that don't support background-clip: text */
}

/* Fallback styling for better compatibility */
@supports not (-webkit-background-clip: text) {
  .card-message {
    background: none;
    color: #ff1493;
    text-shadow: 2px 2px 4px rgba(255, 20, 147, 0.3);
  }
}

.decor {
  font-size: clamp(1em, 3vw, 1.5em);
  text-align: center;
  background: linear-gradient(135deg, #ff69b4, #ff1493, #ffd700);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: float 3s ease-in-out infinite, shimmer 4s ease-in-out infinite;
  line-height: 1.4;
  margin-top: 1em;
}

.flip-hint {
  font-size: clamp(0.7em, 1.8vw, 0.85em);
  margin-top: 1.5em;
  opacity: 0.7;
  color: #666;
  font-style: italic;
  animation: hint-pulse 2s ease-in-out infinite;
}

/* Animations */
@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes cover-shine {
  0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
  100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

@keyframes page-sparkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.6; }
}

@keyframes cake-bounce {
  0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
  25% { transform: translateY(-8px) rotate(-2deg) scale(1.05); }
  50% { transform: translateY(-12px) rotate(0deg) scale(1.1); }
  75% { transform: translateY(-6px) rotate(2deg) scale(1.05); }
}

@keyframes title-glow {
  0%, 100% { 
    text-shadow: 
      3px 3px 6px rgba(0,0,0,0.4),
      0 0 25px rgba(255, 255, 255, 0.6);
  }
  50% { 
    text-shadow: 
      3px 3px 6px rgba(0,0,0,0.4),
      0 0 35px rgba(255, 255, 255, 0.9),
      0 0 45px rgba(255, 215, 0, 0.4);
  }
}

@keyframes subtitle-fade {
  0%, 100% { opacity: 0.95; }
  50% { opacity: 0.7; }
}

@keyframes balloons-float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  33% { transform: translateY(-5px) rotate(-1deg); }
  66% { transform: translateY(-8px) rotate(1deg); }
}

@keyframes hint-pulse {
  0%, 100% { 
    opacity: 0.8; 
    transform: scale(1);
  }
  50% { 
    opacity: 0.5; 
    transform: scale(0.98);
  }
}

@keyframes party-bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0) rotate(0deg); }
  10% { transform: translateY(-8px) rotate(-5deg); }
  30% { transform: translateY(-12px) rotate(3deg); }
  40% { transform: translateY(-15px) rotate(-2deg); }
  60% { transform: translateY(-8px) rotate(2deg); }
  70% { transform: translateY(-5px) rotate(-1deg); }
}

@keyframes emoji-spin {
  0% { filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.4)) hue-rotate(0deg); }
  25% { filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.4)) hue-rotate(90deg); }
  50% { filter: drop-shadow(0 5px 15px rgba(64, 224, 208, 0.4)) hue-rotate(180deg); }
  75% { filter: drop-shadow(0 5px 15px rgba(255, 99, 71, 0.4)) hue-rotate(270deg); }
  100% { filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.4)) hue-rotate(360deg); }
}

@keyframes rainbow-text {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}



@keyframes shimmer {
  0%, 100% { opacity: 1; transform: translateY(0) scale(1); }
  25% { opacity: 0.8; transform: translateY(-5px) scale(1.02); }
  50% { opacity: 1; transform: translateY(-15px) scale(1.05); }
  75% { opacity: 0.9; transform: translateY(-8px) scale(1.03); }
}

@keyframes float {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-15px) scale(1.05); }
}

/* Confetti */
.confetti {
  position: fixed;
  width: 8px;
  height: 8px;
  z-index: 1000;
  pointer-events: none;
  border-radius: 2px;
}

.confetti-piece {
  animation: confetti-fall linear forwards;
}

@keyframes confetti-fall {
  0% { 
    transform: translateY(-100vh) rotate(0deg); 
    opacity: 1; 
  }
  100% { 
    transform: translateY(100vh) rotate(720deg); 
    opacity: 0; 
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {
  body {
    padding: 5px;
  }
  
  #birthdayCard {
    height: min(350px, 70vh);
  }
  
  .card-face {
    padding: 15px;
  }
}

@media (max-height: 500px) {
  #birthdayCard {
    height: 90vh;
  }
  
  .card-message {
    font-size: clamp(0.8em, 2vw, 1em);
    line-height: 1.3;
  }
  
  .emoji-deco {
    font-size: clamp(1em, 3vw, 1.5em);
    margin-bottom: 0.5em;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .card, .cover-decoration, .emoji-deco, .decor, .confetti-piece {
    animation: none !important;
    transition: none !important;
  }
  
  .cover-hint, .flip-hint {
    animation: none;
    opacity: 0.9;
  }
}
```

  </style>
</head>
<body>
  <div id="birthdayCard">
    <div class="card" id="card">
      <!-- Front of card -->
      <div class="card-face card-front">
        <div class="cover-content">
          <div class="cover-decoration">üéÇ</div>
          <h1 class="cover-title">Happy Birthday!</h1>
          <div class="cover-subtitle">Hope your special day is wonderful</div>
          <div class="cover-balloons">üéàüéäüéà</div>
          <div class="cover-hint">Click to flip</div>
        </div>
      </div>

```
  <!-- Back of card -->
  <div class="card-face card-back">
    <div class="emoji-deco">üéäüåüüéàüéâ</div>
    <div class="card-message" id="messageText"></div>
    <div class="decor">‚ú®üéÅ‚ú®</div>
    <div class="flip-hint">Click to flip back</div>
  </div>
</div>
```

  </div>

  <script>
    function getNameFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('name')?.trim() || 'Friend';
    }

    function flipCard() {
      const card = document.getElementById('card');
      card.classList.toggle('flipped');
    }

    function launchConfetti() {
      const colors = ['#ff69b4', '#ffd700', '#40e0d0', '#ff1493', '#00ff7f', '#ff6347'];
      const confettiCount = window.innerWidth < 768 ? 40 : 80;
      
      for (let i = 0; i < confettiCount; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti confetti-piece';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDuration = (2 + Math.random() * 3) + 's';
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          
          // Random shapes
          if (Math.random() > 0.5) {
            confetti.style.borderRadius = '50%';
          }
          
          document.body.appendChild(confetti);
          
          setTimeout(() => {
            if (confetti.parentNode) {
              confetti.remove();
            }
          }, 6000);
        }, i * 50);
      }
    }

    function playTune() {
      // Check if user has reduced motion preference
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        return;
      }
      
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        
        // Happy Birthday melody
        const notes = [
          261.63, 261.63, 293.66, 261.63, 349.23, 329.63,
          261.63, 261.63, 293.66, 261.63, 392.00, 349.23,
          261.63, 261.63, 523.25, 440.00, 349.23, 329.63, 293.66,
          466.16, 466.16, 440.00, 349.23, 392.00, 349.23
        ];
        
        const durations = [
          0.5, 0.25, 0.75, 0.75, 0.75, 1.5,
          0.5, 0.25, 0.75, 0.75, 0.75, 1.5,
          0.5, 0.25, 0.75, 0.75, 0.75, 0.75, 1.5,
          0.5, 0.25, 0.75, 0.75, 0.75, 1.5
        ];
        
        let time = ctx.currentTime + 0.1;

        notes.forEach((note, i) => {
          const oscillator = ctx.createOscillator();
          const gainNode = ctx.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(ctx.destination);
          
          oscillator.type = 'triangle';
          oscillator.frequency.value = note;
          
          gainNode.gain.setValueAtTime(0, time);
          gainNode.gain.linearRampToValueAtTime(0.15, time + 0.01);
          gainNode.gain.exponentialRampToValueAtTime(0.001, time + durations[i]);
          
          oscillator.start(time);
          oscillator.stop(time + durations[i]);
          
          time += durations[i] * 0.9; // Slight overlap
        });
      } catch (e) {
        console.warn('Audio playback not supported');
      }
    }

    // Setup
    window.addEventListener('load', () => {
      const name = getNameFromURL();
      const messageElement = document.getElementById('messageText');
      messageElement.textContent = `üéà HAPPY BIRTHDAY\n${name.toUpperCase()}! üéà\n\nHope your day is magical\nand filled with joy! ‚ú®\n\nMake a wish! üåü`;
      
      const card = document.getElementById('card');
      let hasFlippedOnce = false;
      
      const handleClick = (e) => {
        e.stopPropagation();
        flipCard();
        
        // Only trigger confetti and music on first flip to back
        if (!hasFlippedOnce && !card.classList.contains('flipped')) {
          hasFlippedOnce = true;
          setTimeout(() => {
            launchConfetti();
            playTune();
          }, 600); // Wait for flip animation to complete
        }
      };
      
      card.addEventListener('click', handleClick);
      card.addEventListener('touchstart', handleClick, { passive: true });
      
      // Keyboard accessibility
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          handleClick(e);
        }
      });
      
      // Make card focusable
      card.setAttribute('tabindex', '0');
      card.setAttribute('role', 'button');
      card.setAttribute('aria-label', 'Flip birthday card');
    });

    // Handle orientation changes
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        window.scrollTo(0, 0);
      }, 100);
    });
  </script>

</body>
</html>
