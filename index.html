<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Birthday Exploding Hello</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

  body, html {
    margin: 0; padding: 0;
    height: 100%;
    overflow: hidden;
    /* Bright festive gradient for birthday */
    background: radial-gradient(circle at center, #ffecb3 0%, #ff9800 80%);
    font-family: 'Orbitron', sans-serif;
    color: #b71c1c;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }

  #starfield {
    display: none; /* Hide stars on birthday theme for clarity */
  }

  #form {
    z-index: 10;
    text-align: center;
  }

  input, button {
    padding: 10px;
    font-size: 1.2em;
    margin-top: 1em;
    border-radius: 5px;
    border: none;
  }

  button {
    cursor: pointer;
    background: #d84315;
    color: white;
    font-weight: bold;
  }

  #helloContainer {
    position: relative;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    font-size: 3em;
    opacity: 0;
    z-index: 10;
    user-select: none;
  }

  .letter {
    position: relative;
    transform: translate(0, 0) scale(0);
    opacity: 0;
    transition: transform 1s ease-out, opacity 1s;
    /* Birthday glow */
    color: #b71c1c;
    text-shadow:
      0 0 5px #ffcc33,
      0 0 10px #ffcc33,
      0 0 20px #ff6600,
      0 0 30px #ff3300;
  }

  #confetti {
    pointer-events: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 20;
    overflow: visible;
  }

  .confetti-piece {
    position: absolute;
    width: 8px;
    height: 14px;
    background-color: #ffcc33;
    opacity: 0.9;
    transform-origin: center;
    animation-name: confetti-fall, confetti-rotate;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }

  @keyframes confetti-fall {
    0% { transform: translateY(-20px); opacity: 1; }
    100% { transform: translateY(110vh); opacity: 0; }
  }
  @keyframes confetti-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
</head>
<body>

<div id="starfield"></div>

<div id="form">
  <h1>Whatâ€™s your name?</h1>
  <input type="text" id="nameInput" placeholder="Type your name" autocomplete="off" />
  <br />
  <button onclick="start()">Submit</button>
</div>

<div id="helloContainer"></div>

<div id="confetti"></div>

<script>
  // Hide stars on birthday (optional)
  const starfield = document.getElementById('starfield');

  // Parse URL query parameters
  function getQueryParams() {
    const params = {};
    location.search.slice(1).split('&').forEach(pair => {
      const [key, value] = pair.split('=');
      if(key) params[key] = decodeURIComponent(value || '');
    });
    return params;
  }

  // Confetti generator
  function createConfetti(num = 50) {
    const confettiContainer = document.getElementById('confetti');
    confettiContainer.innerHTML = ''; // Clear previous

    const colors = ['#ffcc33','#ff4444','#44ff44','#4444ff','#ff44ff','#44ffff','#ff6f61','#ffd700','#ff69b4'];

    for(let i = 0; i < num; i++) {
      const confetti = document.createElement('div');
      confetti.classList.add('confetti-piece');

      confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.left = `${Math.random() * 100}vw`;
      confetti.style.top = `${-Math.random() * 20}px`;

      const width = 6 + Math.random() * 6;
      const height = 10 + Math.random() * 10;
      confetti.style.width = `${width}px`;
      confetti.style.height = `${height}px`;

      const fallDuration = 4000 + Math.random() * 3000;
      confetti.style.animationDuration = `${fallDuration}ms, ${fallDuration / 2}ms`;
      confetti.style.animationDelay = `${Math.random() * 4000}ms, 0ms`;

      confettiContainer.appendChild(confetti);
    }
  }

  function start() {
    const name = document.getElementById('nameInput').value.trim();
    if (!name) return;
    showGreeting(name, false);
  }

  // Fix for emojis in message (use Unicode, no emoji font fallback issues)
  // Use ðŸŽ‰ and ðŸŽ‚ emojis directly in string literals

  function showGreeting(name, isBday) {
    document.getElementById('form').style.display = 'none';
    const container = document.getElementById('helloContainer');
    container.style.opacity = 1;
    container.innerHTML = '';

    if(isBday){
      starfield.style.display = 'none'; // Hide stars on birthday
      createConfetti(80);
      // Add repeated confetti bursts every 3s
      setInterval(() => createConfetti(30), 3000);
    } else {
      starfield.style.display = 'block';
      document.getElementById('confetti').innerHTML = '';
    }

    const message = isBday
      ? `HAPPY BIRTHDAY ${name.toUpperCase()}! ðŸŽ‰ðŸŽ‚`
      : `HELLO ${name.toUpperCase()}`;

    message.split('').forEach((char, i) => {
      const span = document.createElement('span');
      span.className = 'letter';
      span.textContent = char === ' ' ? '\u00A0' : char;

      // Explode from random spots around screen edges
      const angle = Math.random() * 2 * Math.PI;
      const radius = 800;
      const x = Math.cos(angle) * radius;
      const y = Math.sin(angle) * radius;
      const rotation = (Math.random() - 0.5) * 720;

      span.style.transform = `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(0)`;
      span.style.transition = `transform 1s ease-out, opacity 1s`;
      container.appendChild(span);

      setTimeout(() => {
        span.style.transform = `translate(0, 0) rotate(0deg) scale(1)`;
        span.style.opacity = 1;
      }, i * 100);
    });
  }

  // On load: check URL params for birthday mode
  window.onload = () => {
    const params = getQueryParams();
    if(params.bday === 'true' && params.name) {
      showGreeting(params.name, true);
    }
  };
</script>

</body>
</html>
